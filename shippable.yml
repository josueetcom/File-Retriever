language: java

jdk:
- oraclejdk8

services:

env:

matrix:

build:
  pre_ci:

  pre_ci_boot:
    image_name:
    image_tag:
    pull:
    options:
  
  ci:
    # Because the android sdk isn't downloaded by default
    - curl https://dl.google.com/android/android-sdk_r24.4.1-linux.tgz -o android-sdk-linux.tgz
    - tar xzf android-sdk-linux.tgz
    - export ANDROID_HOME="$PWD/android-sdk-linux"
    # install android-24 platform
    - $ANDROID_HOME/tools/android update sdk --no-ui --filter android-24 <<< "y"
    - mkdir -p shippable/testresults
    - mkdir -p shippable/codecoverage
    - ./gradlew assemble
    - ./gradlew test
  on_success:
    - echo "success!"
  on_failure:
    - echo "failure"
  cache:
  push:
