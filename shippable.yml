language: java

jdk:
- oraclejdk8

services:

env:

matrix:

build:
  pre_ci:

  pre_ci_boot:
    image_name:
    image_tag:
    pull:
    options:
  
  ci:
    # Because the android sdk isn't downloaded by default
    - export ANDROID_HOME="$PWD/android-sdk-linux"
    - ./setup.sh
    - mkdir -p shippable/testresults
    - mkdir -p shippable/codecoverage
    - ./gradlew assemble
    - ./gradlew test
  post_ci:
    # TODO: See if the tests are there or not
    - ls -R
  on_success:
    - echo "success!"
  on_failure:
    - echo "failure"
  # we want to cache stuff
  cache: true
  cache_dir_list:
    - $SHIPPABLE_BUILD_DIR/android-sdk-linux
  push:
